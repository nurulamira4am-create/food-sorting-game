<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Food Sorting Game</title>
<style>
  body {
    font-family: "Poppins", sans-serif;
    background: linear-gradient(135deg, #fff9f0, #ffe3dc);
    text-align: center;
    padding: 30px;
  }
  h1 {
    color: #333;
    margin-bottom: 10px;
    font-size: 2em;
  }
  .instructions {
    font-size: 18px;
    margin-bottom: 25px;
  }
  .drag-area {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 15px;
    margin-bottom: 30px;
  }
  .item {
    text-align: center;
    transition: transform 0.2s ease;
  }
  .item:hover { transform: scale(1.08); }
  .item img {
    width: 90px;
    height: 90px;
    border-radius: 10px;
    object-fit: cover;
    cursor: grab;
    border: 3px solid transparent;
    transition: border 0.2s ease;
  }
  .item p { margin-top: 5px; font-size: 14px; }

  .categories {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 20px;
    margin-bottom: 20px;
  }
  .category {
    border-radius: 15px;
    width: 300px;
    min-height: 320px;
    padding: 15px;
    transition: 0.3s;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  }
  .category h2 {
    color: white;
    padding: 10px;
    border-radius: 8px;
    font-size: 20px;
    margin-bottom: 10px;
  }

  #real { background-color: #e7f9e7; border: 3px dashed #69c96b; }
  #real h2 { background-color: #69c96b; }
  #processed { background-color: #fff4e3; border: 3px dashed #ffa94d; }
  #processed h2 { background-color: #ffa94d; }
  #ultra { background-color: #ffe6eb; border: 3px dashed #ff6b81; }
  #ultra h2 { background-color: #ff6b81; }

  .highlight { transform: scale(1.05); box-shadow: 0 0 10px rgba(0,0,0,0.15); }
  .correct { border-color: #2ecc71 !important; }
  .wrong { border-color: #e74c3c !important; }

  button {
    background-color: #4caf50;
    color: white;
    font-size: 18px;
    padding: 10px 25px;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    transition: 0.3s;
    margin: 10px;
  }
  button:hover { background-color: #43a047; transform: scale(1.05); }
</style>
</head>
<body>

<h1>üçé Food Sorting Game</h1>
<p class="instructions">Drag each food item into the correct box: <b>Real Food</b>, <b>Processed Food</b>, or <b>Ultra-Processed Food</b>.</p>

<div class="drag-area" id="items"></div>

<div class="categories">
  <div class="category" id="real" ondrop="drop(event)" ondragover="allowDrop(event)" ondragenter="highlight(this)" ondragleave="unhighlight(this)">
    <h2>Real Food</h2>
  </div>
  <div class="category" id="processed" ondrop="drop(event)" ondragover="allowDrop(event)" ondragenter="highlight(this)" ondragleave="unhighlight(this)">
    <h2>Processed Food</h2>
  </div>
  <div class="category" id="ultra" ondrop="drop(event)" ondragover="allowDrop(event)" ondragenter="highlight(this)" ondragleave="unhighlight(this)">
    <h2>Ultra-Processed Food</h2>
  </div>
</div>

<button onclick="checkAnswers()">Check Answers</button>
<button onclick="resetGame()">Reset</button>

<audio id="ding" src="ding.mp3"></audio>
<audio id="buzz" src="buzz.mp3"></audio>

<script>
const foods = [
  { name: "baked potato", img: "images/(P) baked potato.jpg", type: "processed" },
  { name: "canned corn", img: "images/(P) canned corn.jpg", type: "processed" },
  { name: "carrot juice", img: "images/(P) carrot juice.png", type: "processed" },
  { name: "cream", img: "images/(P) cream.png", type: "processed" },
  { name: "flour", img: "images/(P) flour.jpg", type: "processed" },
  { name: "wholemeal bread", img: "images/(P) wholemeal bread.jpg", type: "processed" },

  { name: "carrot", img: "images/(R) carrot.jpg", type: "real" },
  { name: "corn", img: "images/(R) corn.webp", type: "real" },
  { name: "fresh milk", img: "images/(R) fresh milk.jpg", type: "real" },
  { name: "potato", img: "images/(R) potato.jpg", type: "real" },
  { name: "wholewheat", img: "images/(R) wholewheat.jpg", type: "real" },

  { name: "carrot cake", img: "images/(U) carrot cake.png", type: "ultra" },
  { name: "cookies", img: "images/(U) cookies.jpg", type: "ultra" },
  { name: "corn chip", img: "images/(U) corn chip.jpg", type: "ultra" },
  { name: "french fries", img: "images/(U) french fries.jpg", type: "ultra" },
  { name: "ice cream", img: "images/(U) ice cream.jpg", type: "ultra" },
  { name: "white bread", img: "images/(U) white bread.jpg", type: "ultra" }
];


const container = document.getElementById("items");
foods.forEach((food, i) => {
  const div = document.createElement("div");
  div.className = "item";
  div.id = "item" + i;
  div.draggable = true;
  div.addEventListener("dragstart", drag);
  div.dataset.type = food.type;
  div.innerHTML = `<img src="${food.img}" alt="${food.name}"><p>${food.name}</p>`;
  container.appendChild(div);
});

function allowDrop(e) {
  e.preventDefault();
}

function drag(e) {
  // Safari fix: ensure you're dragging the .item, not the image
  const target = e.target.closest(".item");
  e.dataTransfer.setData("text/plain", target.id);
}

function drop(e) {
  e.preventDefault();

  const dropZone = e.target.closest(".category");
  const data = e.dataTransfer.getData("text/plain");
  const dragged = document.getElementById(data);

  if (dropZone && dragged) {
    dropZone.appendChild(dragged);
  }

  unhighlight(dropZone);
}

function highlight(el) {
  el.classList.add("highlight");
}

function unhighlight(el) {
  el.classList.remove("highlight");
}

function checkAnswers() {
  let correctCount = 0;
  const ding = document.getElementById("ding");
  const buzz = document.getElementById("buzz");

  document.querySelectorAll(".item img").forEach(img => img.classList.remove("correct", "wrong"));

  document.querySelectorAll(".category").forEach(cat => {
    const category = cat.id;
    cat.querySelectorAll(".item").forEach(item => {
      const type = item.dataset.type;
      const img = item.querySelector("img");
      if (type === category) {
        img.classList.add("correct");
        correctCount++;
      } else {
        img.classList.add("wrong");
      }
    });
  });

  if (correctCount === foods.length) {
    ding.play();
    alert("üéâ Excellent! All answers are correct!");
  } else {
    buzz.play();
    alert(`You got ${correctCount} out of ${foods.length} correct.`);
  }
}

function resetGame() {
  const dragArea = document.getElementById("items");
  dragArea.innerHTML = "";
  foods.forEach((food, i) => {
    const div = document.createElement("div");
    div.className = "item";
    div.id = "item" + i;
    div.draggable = true;
    div.addEventListener("dragstart", drag);
    div.dataset.type = food.type;
    div.innerHTML = `<img src="${food.img}" alt="${food.name}"><p>${food.name}</p>`;
    dragArea.appendChild(div);
  });
}
</script>

</body>
</html>
